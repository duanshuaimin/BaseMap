{"remainingRequest":"/Users/liangma/Desktop/workspace/BaseMap/node_modules/babel-loader/lib/index.js!/Users/liangma/Desktop/workspace/BaseMap/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liangma/Desktop/workspace/BaseMap/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liangma/Desktop/workspace/BaseMap/src/components/editor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liangma/Desktop/workspace/BaseMap/src/components/editor.vue","mtime":1591367189478},{"path":"/Users/liangma/Desktop/workspace/BaseMap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangma/Desktop/workspace/BaseMap/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liangma/Desktop/workspace/BaseMap/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liangma/Desktop/workspace/BaseMap/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBFZGl0b3JDb21wcyBmcm9tICcuL2VkaXRvci1jb21wcyc7CmltcG9ydCBFZGl0b3JDYW52YXMgZnJvbSAnLi9lZGl0b3ItY2FudmFzJzsKaW1wb3J0IEVkaXRvclNldHRpbmdzIGZyb20gJy4vZWRpdG9yLXNldHRpbmdzJzsKaW1wb3J0IEVkaXRvckhlbHAgZnJvbSAnLi9lZGl0b3ItaGVscCc7CmltcG9ydCBFZGl0b3JIaXN0b3J5IGZyb20gJy4vZWRpdG9yLWhpc3RvcnknOwppbXBvcnQgXyBmcm9tICdsb2Rhc2gnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0VkaXRvcicsCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdFN0b3JhZ2VEYXRhKCk7CiAgICB0aGlzLmluaXRCaW5kaW5nRXZlbnQoKTsKICAgIHRoaXMuaW5pdERhdGE7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge30sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVTdGF0ZXM6IHsKICAgICAgICBjdXJyZW50QWN0aXZlSW5kZXg6IC0xLAogICAgICAgIGNvcHlCeUtleUJvb2w6IGZhbHNlLAogICAgICAgIG11bHRpcGxlQWN0aXZlQXJyOiBbXQogICAgICB9LAogICAgICBlZHJhd0NvbXBvbmVudHM6IFtdLAogICAgICBjb25maWdzOiB7CiAgICAgICAgYmc6ICJncmlkIiwKICAgICAgICBwYWdlTmFtZTogJ+W6leWbvicsCiAgICAgICAgc3BhY2luZzogMTAsCiAgICAgICAgc2NhbGU6IDEsCiAgICAgICAgZHJhZ0ljb25TaXplOiAyLAogICAgICAgIElzb21ldHJpY19yb3c6IDEwLAogICAgICAgIElzb21ldHJpY19jb2x1OiAxMCwKICAgICAgICBkb3dsb2FkSW1nVHlwZTogJ3BuZycsCiAgICAgICAgYmdBbGxCb29sOiBmYWxzZSwKICAgICAgICB3aWR0aDogMjk0NSwKICAgICAgICBoZWlnaHQ6IDE0NDUsCiAgICAgICAgbWF4V2lkdGg6IDM0NDUsCiAgICAgICAgbWF4SGllZ2h0OiAxNTA1LAogICAgICAgIGJhY2tncm91bmRVcmw6ICIiCiAgICAgIH0sCiAgICAgIHdlYkNvbmZpZzogewogICAgICAgIGN1c3RvbTogMjUsCiAgICAgICAgYXV0bzogNQogICAgICB9LAogICAgICBoaXN0b3J5Q3Vycm5ldERhdGE6IFtdLAogICAgICBjdXJyZW50SGlzdG9yeUluZGV4OiAtMSwKICAgICAgYWN0aXZlSGlzdG9yeUJvb2w6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgJ2VkaXRvci1jb21wcyc6IEVkaXRvckNvbXBzLAogICAgJ2VkaXRvci1jYW52YXMnOiBFZGl0b3JDYW52YXMsCiAgICAnZWRpdG9yLXNldHRpbmdzJzogRWRpdG9yU2V0dGluZ3MsCiAgICAnZWRpdG9yLWhlbHAnOiBFZGl0b3JIZWxwLAogICAgJ2VkaXRvci1oaXN0b3J5JzogRWRpdG9ySGlzdG9yeQogIH0sCiAgbWV0aG9kczogewogICAgaW5pdERhdGE6IGZ1bmN0aW9uIGluaXREYXRhKCkgewogICAgICB0aGlzLmFjdGl2ZUhpc3RvcnlCb29sID0gZmFsc2U7CiAgICB9LAogICAgaW5pdEJpbmRpbmdFdmVudDogZnVuY3Rpb24gaW5pdEJpbmRpbmdFdmVudCgpIHsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMua2F5ZG93bkZ1biwgZmFsc2UpOwogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm1vdXNlZG93bkZ1bik7CiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCB0aGlzLmxlYXZpbmcpOwogICAgfSwKICAgIGxlYXZpbmc6IGZ1bmN0aW9uIGxlYXZpbmcoZXZlbnQpIHsKICAgICAgLy8gdGhpcy5zYXZlRGF0ZVRvU3RvcmFnZSgpOwogICAgICAvLyBjb25zb2xlLmxvZyhldmVudC5yZXR1cm5WYWx1ZSkKICAgICAgdmFyIG1lc3NhZ2UgPSAi5YaF5a655pu05pS577yM5rOo5oSP5oiq5Zu+57yT5a2YIjsKICAgICAgZXZlbnQucmV0dXJuVmFsdWUgPSBtZXNzYWdlOwogICAgICByZXR1cm4gbWVzc2FnZTsKICAgIH0sCiAgICBkb3dubG9hZDogZnVuY3Rpb24gZG93bmxvYWQoKSB7Ly9UT0RPOumhtemdouS4i+i9vQogICAgfSwKICAgIHNhdmVBczogZnVuY3Rpb24gc2F2ZUFzKGltZykgewogICAgICB2YXIgX2RvbSA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CgogICAgICBfZG9tLmhyZWYgPSBpbWc7CiAgICAgIF9kb20uZGF0YXNldC5kb3dubG9hZHVybCA9IFsnaW1hZ2UvcG5nJywgJ0lNR19ET1dOTE9BRF9OQU1FJywgX2RvbS5ocmVmXS5qb2luKCc6Jyk7CiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoX2RvbSk7CgogICAgICBfZG9tLmNsaWNrKCk7CgogICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKF9kb20pOwogICAgfSwKICAgIC8vIOe7hOS7tumAieaLqQogICAgc2VsZWN0Q29tcDogZnVuY3Rpb24gc2VsZWN0Q29tcChldmVudCwgY29tcCkgewogICAgICB2YXIgaXRlbSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29tcCkpOwogICAgICBpZiAoIWl0ZW0pIHJldHVybjsKICAgICAgdGhpcy5pbml0Q29tcFN0YXRlKCk7CiAgICAgIGl0ZW0uaXNBY3RpdmUgPSB0cnVlOwogICAgICBpdGVtLm11bHRpcGxlQWN0aXZlQm9vbCA9IGZhbHNlOwogICAgICB2YXIgcmVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKS5nZXRDbGllbnRSZWN0cygpWzBdOwogICAgICB2YXIgX2l0ZW0kZGVmU3R5bGUgPSBpdGVtLmRlZlN0eWxlLAogICAgICAgICAgd2lkdGggPSBfaXRlbSRkZWZTdHlsZS53aWR0aCwKICAgICAgICAgIGhlaWdodCA9IF9pdGVtJGRlZlN0eWxlLmhlaWdodCwKICAgICAgICAgIGJvcmRlclJhZGl1cyA9IF9pdGVtJGRlZlN0eWxlLmJvcmRlclJhZGl1cywKICAgICAgICAgIHJvdGF0ZSA9IF9pdGVtJGRlZlN0eWxlLnJvdGF0ZSwKICAgICAgICAgIGJvcmRlcldpZHRoID0gX2l0ZW0kZGVmU3R5bGUuYm9yZGVyV2lkdGgsCiAgICAgICAgICBiYWNrZ3JvdW5kID0gX2l0ZW0kZGVmU3R5bGUuYmFja2dyb3VuZCwKICAgICAgICAgIGlzQXBwbHlTaGFkb3cgPSBfaXRlbSRkZWZTdHlsZS5pc0FwcGx5U2hhZG93LAogICAgICAgICAgYmdpQm9vbCA9IF9pdGVtJGRlZlN0eWxlLmJnaUJvb2wsCiAgICAgICAgICBjb2xvciA9IF9pdGVtJGRlZlN0eWxlLmNvbG9yLAogICAgICAgICAgYm9yZGVyID0gX2l0ZW0kZGVmU3R5bGUuYm9yZGVyLAogICAgICAgICAgb3BhY2l0eSA9IF9pdGVtJGRlZlN0eWxlLm9wYWNpdHk7CiAgICAgIHZhciBjbGllbnRYID0gZXZlbnQuY2xpZW50WCwKICAgICAgICAgIGNsaWVudFkgPSBldmVudC5jbGllbnRZOwogICAgICB2YXIgX3N0eWxlID0gewogICAgICAgIHdpZHRoOiB3aWR0aCB8fCAxMDAsCiAgICAgICAgaGVpZ2h0OiBoZWlnaHQgfHwgMTAwLAogICAgICAgIHRvcDogY2xpZW50WSAtIHJlY3QudG9wICsgNjAgfHwgMTAwLAogICAgICAgIGxlZnQ6IGNsaWVudFggKyAyMTMgLSByZWN0LmxlZnQgfHwgMTAwLAogICAgICAgIHJvdGF0ZTogcm90YXRlIHx8IDAsCiAgICAgICAgZHJhZ19zdGFydF94OiAwLAogICAgICAgIC8v5ouW5ou955u45a+5CiAgICAgICAgZHJhZ19zdGFydF95OiAwLAogICAgICAgIGJvcmRlcldpZHRoOiBib3JkZXJXaWR0aCB8fCAwLAogICAgICAgIGJhY2tncm91bmQ6IGJhY2tncm91bmQsCiAgICAgICAgaXNBcHBseVNoYWRvdzogaXNBcHBseVNoYWRvdyA9PT0gdW5kZWZpbmVkIHx8IGlzQXBwbHlTaGFkb3cgPT09IG51bGwgPyAndHJ1ZScgOiAnZmFsc2UnLAogICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLAogICAgICAgIGlzRml4ZWQ6ICJmYWxzZSIsCiAgICAgICAgYmdpQm9vbDogYmdpQm9vbCB8fCBmYWxzZSwKICAgICAgICAvL+adkOi0qAogICAgICAgIGJvcmRlclJhZGl1czogYm9yZGVyUmFkaXVzIHx8IDAsCiAgICAgICAgYm9yZGVyOiBib3JkZXIsCiAgICAgICAgZm9udFNpemU6IDE0LAogICAgICAgIG9wYWNpdHk6IG9wYWNpdHksCiAgICAgICAgY29sb3I6IGNvbG9yCiAgICAgIH07CiAgICAgIF9zdHlsZS5sZWZ0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oX3N0eWxlLmxlZnQsIHRoaXMuY29uZmlncy5tYXhXaWR0aCkpOwogICAgICBfc3R5bGUudG9wID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oX3N0eWxlLnRvcCwgdGhpcy5jb25maWdzLm1heEhpZWdodCkpOwogICAgICBpdGVtLnN0eWxlID0gX3N0eWxlOwogICAgICB0aGlzLmVkcmF3Q29tcG9uZW50cy5wdXNoKGl0ZW0pOwogICAgICB0aGlzLmVTdGF0ZXMuY3VycmVudEFjdGl2ZUluZGV4ID0gdGhpcy5lZHJhd0NvbXBvbmVudHMubGVuZ3RoIC0gMTsKICAgIH0sCiAgICBpbml0Q29tcG9uZW50U3RhdGU6IGZ1bmN0aW9uIGluaXRDb21wb25lbnRTdGF0ZShjdXJyZW50LCBldmVudCkgewogICAgICBpZiAoY3VycmVudCA9PT0gdW5kZWZpbmVkIHx8IGN1cnJlbnQgPT09IG51bGwgfHwgY3VycmVudCA9PT0gLTEpIHJldHVybjsKCiAgICAgIGlmIChldmVudCAmJiAoZXZlbnQuc2hpZnRLZXkgfHwgZXZlbnQubWV0YUtleSAmJiB0aGlzLmlzTWFjKCkpICYmIGV2ZW50LmJ1dHRvbiA9PT0gMCkgewogICAgICAgIHRoaXMuZWRyYXdDb21wb25lbnRzW2N1cnJlbnRdLmlzQWN0aXZlID0gZmFsc2U7CgogICAgICAgIGlmICh0aGlzLmVTdGF0ZXMuY3VycmVudEFjdGl2ZUluZGV4ID4gLTEpIHsKICAgICAgICAgIHRoaXMuZVN0YXRlcy5jdXJyZW50QWN0aXZlSW5kZXggPSAtMTsKICAgICAgICB9IC8vIOWkmumAieaTjeS9nOe8k+WtmOaVsOe7hAoKCiAgICAgICAgdmFyIF9tdWx0aXBBY3RpdmVJbmRleCA9IHRoaXMuZVN0YXRlcy5tdWx0aXBsZUFjdGl2ZUFyci5pbmRleE9mKHRoaXMuZWRyYXdDb21wb25lbnRzW2N1cnJlbnRdKTsKCiAgICAgICAgaWYgKF9tdWx0aXBBY3RpdmVJbmRleCA9PT0gLTEpIHsKICAgICAgICAgIHRoaXMuZVN0YXRlcy5tdWx0aXBsZUFjdGl2ZUFyci5wdXNoKHRoaXMuZWRyYXdDb21wb25lbnRzW2N1cnJlbnRdKTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmVkcmF3Q29tcG9uZW50c1tjdXJyZW50XS5tdWx0aXBsZUFjdGl2ZUJvb2wpIHsKICAgICAgICAgIHRoaXMuZWRyYXdDb21wb25lbnRzW2N1cnJlbnRdLm11bHRpcGxlQWN0aXZlQm9vbCA9IGZhbHNlOwogICAgICAgICAgdGhpcy5lU3RhdGVzLm11bHRpcGxlQWN0aXZlQXJyLnNwbGljZShfbXVsdGlwQWN0aXZlSW5kZXgsIDEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmVkcmF3Q29tcG9uZW50c1tjdXJyZW50XS5tdWx0aXBsZUFjdGl2ZUJvb2wgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmluaXRDb21wU3RhdGUoKTsKICAgICAgICB0aGlzLmVTdGF0ZXMuY3VycmVudEFjdGl2ZUluZGV4ID0gY3VycmVudDsKICAgICAgICB0aGlzLmVkcmF3Q29tcG9uZW50c1tjdXJyZW50XS5pc0FjdGl2ZSA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICAvLyDliJ3lp4vljJbnlLvluIPlhoXnu4Tku7bnirbmgIEKICAgIGluaXRDb21wU3RhdGU6IGZ1bmN0aW9uIGluaXRDb21wU3RhdGUoKSB7CiAgICAgIHZhciBsZW4gPSB0aGlzLmVkcmF3Q29tcG9uZW50cy5sZW5ndGg7CiAgICAgIHRoaXMuZVN0YXRlcy5tdWx0aXBsZUFjdGl2ZUFyciA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgIHRoaXMuZWRyYXdDb21wb25lbnRzW2ldLmlzQWN0aXZlID0gZmFsc2U7CiAgICAgICAgdGhpcy5lZHJhd0NvbXBvbmVudHNbaV0ubXVsdGlwbGVBY3RpdmVCb29sID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIHRoaXMuZVN0YXRlcy5jb3B5QnlLZXlCb29sID0gZmFsc2U7CiAgICB9LAogICAgLy8g57uE5Lu25ouW5ou977yac2hpZnRLZXkgPT09IHRydWUg5aSE55CG5aSa6YCJCiAgICBkcmFnQ3VycmVudENvbXA6IGZ1bmN0aW9uIGRyYWdDdXJyZW50Q29tcChldmVudCwgY29tcCwgc3RhdGUsIGN1cnJlbnRJbmRleCwgY2FudmVzUmVjdCkgewogICAgICBpZiAoZXZlbnQgJiYgKGV2ZW50LnNoaWZ0S2V5IHx8IGV2ZW50Lm1ldGFLZXkgJiYgdGhpcy5pc01hYygpKSkgewogICAgICAgIGNvbnNvbGUubG9nKCflpJrpgInlpITnkIYnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmVTdGF0ZXMuY29weUJ5S2V5Qm9vbCA9IGZhbHNlOwogICAgICAgIHZhciBfcmVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKS5nZXRDbGllbnRSZWN0cygpWzBdOwogICAgICAgIHZhciBfbCA9IF9yZWN0LmxlZnQ7CiAgICAgICAgdmFyIF90ID0gX3JlY3QubGVmdDsKCiAgICAgICAgaWYgKHN0YXRlID09PSAnc3RhcnQnKSB7CiAgICAgICAgICB0aGlzLmVTdGF0ZXMuY3VycmVudEFjdGl2ZUluZGV4ID0gY3VycmVudEluZGV4OwogICAgICAgICAgY29uc29sZS5sb2coZXZlbnQuY2xpZW50WCwgY29tcC5zdHlsZS5sZWZ0LCBfbCwgY2FudmVzUmVjdC54LCB0aGlzLmNvbmZpZ3Muc2NhbGUpOwogICAgICAgICAgY29tcC5zdHlsZS5kcmFnX3N0YXJ0X3ggPSBldmVudC5jbGllbnRYIC0gY29tcC5zdHlsZS5sZWZ0IC0gX2wgKyBjYW52ZXNSZWN0Lng7CiAgICAgICAgICBjb21wLnN0eWxlLmRyYWdfc3RhcnRfeSA9IGV2ZW50LmNsaWVudFkgLSBjb21wLnN0eWxlLnRvcCAtIF90ICsgY2FudmVzUmVjdC55OwogICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09ICdkcmFnJykgewogICAgICAgICAgdmFyIF9sZWZ0ID0gZXZlbnQuY2xpZW50WCAtIGNvbXAuc3R5bGUuZHJhZ19zdGFydF94IC0gX2wgKyBjYW52ZXNSZWN0Lng7CgogICAgICAgICAgdmFyIF90b3AgPSBldmVudC5jbGllbnRZIC0gY29tcC5zdHlsZS5kcmFnX3N0YXJ0X3kgLSBfdCArIGNhbnZlc1JlY3QueTsKCiAgICAgICAgICBpZiAoX2xlZnQgPCAwIHx8IF90b3AgPCAwKSByZXR1cm47CiAgICAgICAgICBfbGVmdCA9IE1hdGgubWF4KDAsIE1hdGgubWluKF9sZWZ0LCB0aGlzLmNvbmZpZ3MubWF4V2lkdGgpKTsKICAgICAgICAgIF90b3AgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihfdG9wLCB0aGlzLmNvbmZpZ3MubWF4SGllZ2h0KSk7CiAgICAgICAgICBjb21wLnN0eWxlLmxlZnQgPSBfbGVmdDsKICAgICAgICAgIGNvbXAuc3R5bGUudG9wID0gX3RvcDsKICAgICAgICB9CgogICAgICAgIGlmIChbJ3N0YXJ0JywgJ2RyYWcnXS5pbmRleE9mKHN0YXRlKSA+IC0xKSB7CiAgICAgICAgICB0aGlzLmVsaW1pbmF0ZUdob3N0aW5nKGV2ZW50KTsgLy8g5raI6Zmk5ouW5ou96ay85b2xCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgcmVzaXplQnlEcmFnQ29tcDogZnVuY3Rpb24gcmVzaXplQnlEcmFnQ29tcChldmVudCwgY29tcCwgc3RhdGUsIGFycm93LCBjdXJyZW50SW5kZXgpIHsKICAgICAgaWYgKGV2ZW50ICYmIChldmVudC5zaGlmdEtleSB8fCBldmVudC5tZXRhS2V5ICYmIHRoaXMuaXNNYWMoKSkpIHsKICAgICAgICBjb25zb2xlLmxvZygn5aSa6YCJ5aSE55CGJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lU3RhdGVzLmNvcHlCeUtleUJvb2wgPSBmYWxzZTsKICAgICAgICB2YXIgX2wgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJykuZ2V0Q2xpZW50UmVjdHMoKVswXS5sZWZ0OwogICAgICAgIHZhciBfdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKS5nZXRDbGllbnRSZWN0cygpWzBdLnRvcDsKCiAgICAgICAgaWYgKHN0YXRlID09PSAnc3RhcnQnKSB7CiAgICAgICAgICB0aGlzLmVTdGF0ZXMuY3VycmVudEFjdGl2ZUluZGV4ID0gY3VycmVudEluZGV4OwogICAgICAgICAgY29tcC5zdHlsZS5kcmFnX3N0YXJ0X3ggPSBhcnJvdyA9PT0gJ3InID8gY29tcC5zdHlsZS5sZWZ0IDogYXJyb3cgPT09ICdsJyA/IGNvbXAuc3R5bGUubGVmdCArIGNvbXAuc3R5bGUud2lkdGggKyBfbCAtIDIxMyA6IDEwOwogICAgICAgICAgY29tcC5zdHlsZS5kcmFnX3N0YXJ0X3kgPSBhcnJvdyA9PT0gJ2InID8gY29tcC5zdHlsZS50b3AgOiBhcnJvdyA9PT0gJ3QnID8gY29tcC5zdHlsZS50b3AgKyBjb21wLnN0eWxlLmhlaWdodCA6IDEwOwogICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09ICdkcmFnJykgewogICAgICAgICAgdmFyIF93aWR0aCA9IDA7CiAgICAgICAgICB2YXIgX3RvcCA9IDA7CiAgICAgICAgICB2YXIgX2hlaWdodCA9IDA7CgogICAgICAgICAgc3dpdGNoIChhcnJvdykgewogICAgICAgICAgICBjYXNlICdyJzoKICAgICAgICAgICAgICBfd2lkdGggPSBwYXJzZUludCgoZXZlbnQuY2xpZW50WCAtIF9sKSAvIHRoaXMuY29uZmlncy5zY2FsZSkgLSBjb21wLnN0eWxlLmRyYWdfc3RhcnRfeCArIDIxMzsKICAgICAgICAgICAgICBfd2lkdGggPSBNYXRoLm1pbihfd2lkdGgsIHRoaXMuY29uZmlncy53aWR0aCk7CiAgICAgICAgICAgICAgY29tcC5zdHlsZS53aWR0aCA9IF93aWR0aCA+PSAxMCA/IF93aWR0aCA6IDEwOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAnbCc6CiAgICAgICAgICAgICAgY29tcC5zdHlsZS5sZWZ0ID0gKGV2ZW50LmNsaWVudFggLSBfbCkgLyB0aGlzLmNvbmZpZ3Muc2NhbGUgKyAyMTM7CiAgICAgICAgICAgICAgX3dpZHRoID0gY29tcC5zdHlsZS5kcmFnX3N0YXJ0X3ggLSBldmVudC5jbGllbnRYIC8gdGhpcy5jb25maWdzLnNjYWxlOwogICAgICAgICAgICAgIF93aWR0aCA9IE1hdGgubWF4KDAsIE1hdGgubWluKF93aWR0aCwgdGhpcy5jb25maWdzLm1heFdpZHRoKSk7CiAgICAgICAgICAgICAgY29tcC5zdHlsZS53aWR0aCA9IF93aWR0aCA+PSAxMCA/IF93aWR0aCA6IDEwOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAndCc6CiAgICAgICAgICAgICAgY29tcC5zdHlsZS50b3AgPSAoZXZlbnQuY2xpZW50WSAtIF90KSAvIHRoaXMuY29uZmlncy5zY2FsZSArIDYwOwogICAgICAgICAgICAgIF9oZWlnaHQgPSBjb21wLnN0eWxlLmRyYWdfc3RhcnRfeSAtIGV2ZW50LmNsaWVudFkgLyB0aGlzLmNvbmZpZ3Muc2NhbGU7CiAgICAgICAgICAgICAgX2hlaWdodCA9IE1hdGgubWF4KDEwLCBNYXRoLm1pbihfaGVpZ2h0LCB0aGlzLmNvbmZpZ3MubWF4V2lkdGgpKTsKICAgICAgICAgICAgICBjb21wLnN0eWxlLmhlaWdodCA9IF9oZWlnaHQgPj0gMTAgPyBfaGVpZ2h0IDogMTA7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICdiJzoKICAgICAgICAgICAgICBfdG9wID0gX3QgPj0gMCA/IChldmVudC5jbGllbnRZIC0gX3QpIC8gdGhpcy5jb25maWdzLnNjYWxlIC0gY29tcC5zdHlsZS5kcmFnX3N0YXJ0X3kgKyA2MCA6IGV2ZW50LmNsaWVudFkgLSBjb21wLnN0eWxlLmRyYWdfc3RhcnRfeSAtIF90ICsgNjA7CiAgICAgICAgICAgICAgX3RvcCA9IE1hdGgubWF4KDEwLCBNYXRoLm1pbihfdG9wLCB0aGlzLmNvbmZpZ3MubWF4V2lkdGgpKTsKICAgICAgICAgICAgICBjb21wLnN0eWxlLmhlaWdodCA9IF90b3AgPj0gMTAgPyBfdG9wIDogMTA7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHRyYW5zQ29tcDogZnVuY3Rpb24gdHJhbnNDb21wKGV2ZW50LCBjb21wKSB7CiAgICAgIHZhciBfeCA9IGV2ZW50LmNsaWVudFggLSBjb21wLnN0eWxlLmxlZnQgLSBjb21wLnN0eWxlLndpZHRoIC8gMjsKCiAgICAgIHZhciBfeSA9IGV2ZW50LmNsaWVudFkgLSBjb21wLnN0eWxlLnRvcCAtIGNvbXAuc3R5bGUuaGVpZ2h0IC8gMjsKCiAgICAgIGNvbXAuc3R5bGUucm90YXRlID0gdGhpcy5jYWxjQW5nbGVEZWdyZWVzKF94LCBfeSk7CiAgICB9LAogICAgY2hhbmdlVGV4dFZhbDogZnVuY3Rpb24gY2hhbmdlVGV4dFZhbChldmVudCwgaXRlbSkgewogICAgICB2YXIgdmFsID0gZXZlbnQudGFyZ2V0LmlubmVyVGV4dDsKCiAgICAgIGlmIChldmVudCAmJiBpdGVtKSB7CiAgICAgICAgaXRlbS52YWx1ZSA9IHZhbDsKICAgICAgICBldmVudC50YXJnZXQuaW5uZXJUZXh0ID0gaXRlbS52YWx1ZTsKICAgICAgfQogICAgfSwKICAgIC8vIOe7hOS7tuWIoOmZpAogICAgZGVsQ29tcDogZnVuY3Rpb24gZGVsQ29tcChpbmRleCwgc3RhdGUpIHsKICAgICAgaWYgKHN0YXRlID09PSAnbXVsdGlwbGVEZWwnKSB7CiAgICAgICAgdmFyIGxlbiA9IHRoaXMuZWRyYXdDb21wb25lbnRzLmxlbmd0aDsKICAgICAgICB0aGlzLmVTdGF0ZXMubXVsdGlwbGVBY3RpdmVBcnIgPSBbXTsKCiAgICAgICAgZm9yICh2YXIgaSA9IGxlbjsgaS0tOyBpID4gMCkgewogICAgICAgICAgdmFyIG11bHRpcEJvb2wgPSB0aGlzLmVkcmF3Q29tcG9uZW50c1tpXS5tdWx0aXBsZUFjdGl2ZUJvb2w7CgogICAgICAgICAgaWYgKG11bHRpcEJvb2wpIHsKICAgICAgICAgICAgdGhpcy5lZHJhd0NvbXBvbmVudHMuc3BsaWNlKGksIDEpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodGhpcy5lU3RhdGVzLmN1cnJlbnRBY3RpdmVJbmRleCA+IC0xICYmIHRoaXMuZWRyYXdDb21wb25lbnRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHRoaXMuZWRyYXdDb21wb25lbnRzLnNwbGljZSh0aGlzLmVTdGF0ZXMuY3VycmVudEFjdGl2ZUluZGV4LCAxKTsKICAgICAgICAgIHRoaXMuZVN0YXRlcy5jdXJyZW50QWN0aXZlSW5kZXggPSAtMTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvLyDplK7nm5jkuovku7YKICAgIGtheWRvd25GdW46IGZ1bmN0aW9uIGtheWRvd25GdW4oZXZlbnQpIHsKICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ3YnICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQubm9kZU5hbWUgPT09ICdJTlBVVCcpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5ID09PSAnYycgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ub2RlTmFtZSA9PT0gJ0lOUFVUJykgewogICAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpOwogICAgICB9CgogICAgICBpZiAoZXZlbnQudGFyZ2V0Lm5vZGVOYW1lID09PSAnSU5QVVQnICYmIHRoaXMuZVN0YXRlcy5jb3B5QnlLZXlCb29sKSB7CiAgICAgICAgdGhpcy5lU3RhdGVzLmNvcHlCeUtleUJvb2wgPSBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ2MnKSB7CiAgICAgICAgdGhpcy5lU3RhdGVzLmNvcHlCeUtleUJvb2wgPSB0cnVlOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZVN0YXRlcy5jb3B5QnlLZXlCb29sICYmIGV2ZW50LmtleSA9PT0gJ3YnKSB7CiAgICAgICAgdGhpcy5jb3B5Q3VycmVudENvbXAoKTsKICAgICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQubm9kZU5hbWUgIT09ICdJTlBVVCcpIHsKICAgICAgICBpZiAoWydBcnJvd1VwJywgJ0Fycm93RG93bicsICdBcnJvd0xlZnQnLCAiQXJyb3dSaWdodCJdLmluZGV4T2YoZXZlbnRbJ2NvZGUnXSkgPiAtMSkgewogICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgICBpZiAodGhpcy5lU3RhdGVzLmN1cnJlbnRBY3RpdmVJbmRleCA+IC0xICYmIHRoaXMuZVN0YXRlcy5tdWx0aXBsZUFjdGl2ZUFyci5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgdGhpcy5hcnJvd0l0ZW0oZXZlbnRbJ2NvZGUnXSwgdGhpcy5lZHJhd0NvbXBvbmVudHNbdGhpcy5lU3RhdGVzLmN1cnJlbnRBY3RpdmVJbmRleF0pOwogICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVTdGF0ZXMubXVsdGlwbGVBY3RpdmVBcnIubGVuZ3RoID4gMCkgewogICAgICAgICAgICB2YXIgbGVuID0gdGhpcy5lU3RhdGVzLm11bHRpcGxlQWN0aXZlQXJyLmxlbmd0aDsKCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgICB0aGlzLmFycm93SXRlbShldmVudFsnY29kZSddLCB0aGlzLmVTdGF0ZXMubXVsdGlwbGVBY3RpdmVBcnJbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoZXZlbnQua2V5ID09PSAnRGVsZXRlJyB8fCB0aGlzLmlzTWFjKCkgJiYgZXZlbnQua2V5ID09PSAnQmFja3NwYWNlJykgewogICAgICAgIGlmICghKGV2ZW50LnRhcmdldC5pbm5lckhUTUwgJiYgZXZlbnQudGFyZ2V0LmNvbnRlbnRFZGl0YWJsZSkgfHwgZXZlbnQudGFyZ2V0LmNvbnRlbnRFZGl0YWJsZSA9PT0gJ2luaGVyaXQnKSB7CiAgICAgICAgICB0aGlzLmRlbENvbXAoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBhcnJvd0l0ZW06IGZ1bmN0aW9uIGFycm93SXRlbShhcnJvdywgb2JqKSB7CiAgICAgIGlmIChhcnJvdyAmJiBvYmopIHsKICAgICAgICBzd2l0Y2ggKGFycm93KSB7CiAgICAgICAgICBjYXNlICdBcnJvd1VwJzoKICAgICAgICAgICAgb2JqLnN0eWxlLnRvcCA9IG9iai5zdHlsZS50b3AgLSAxID4gMCA/IG9iai5zdHlsZS50b3AgLSAxIDogMDsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAnQXJyb3dEb3duJzoKICAgICAgICAgICAgb2JqLnN0eWxlLnRvcCA9IG9iai5zdHlsZS50b3AgKyAxOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdBcnJvd0xlZnQnOgogICAgICAgICAgICBvYmouc3R5bGUubGVmdCA9IG9iai5zdHlsZS5sZWZ0IC0gMSA+IDAgPyBvYmouc3R5bGUubGVmdCAtIDEgOiAwOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdBcnJvd1JpZ2h0JzoKICAgICAgICAgICAgb2JqLnN0eWxlLmxlZnQgPSBvYmouc3R5bGUubGVmdCArIDE7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8vIOWkmumAieS6i+S7tgogICAgbW91c2Vkb3duRnVuOiBmdW5jdGlvbiBtb3VzZWRvd25GdW4oZXZlbnQpIHsKICAgICAgdGhpcy5lbGltaW5hdGVHaG9zdGluZyhldmVudCk7IC8vIOa2iOmZpOaLluaLvemsvOW9sQoKICAgICAgaWYgKGV2ZW50ICYmIGV2ZW50LnNoaWZ0S2V5ICYmIHRoaXMuZVN0YXRlcy5jdXJyZW50QWN0aXZlSW5kZXggPiAtMSkgewogICAgICAgIHRoaXMuZWRyYXdDb21wb25lbnRzW3RoaXMuZVN0YXRlcy5jdXJyZW50QWN0aXZlSW5kZXhdLmlzQWN0aXZlID0gZmFsc2U7CiAgICAgICAgdGhpcy5lU3RhdGVzLmN1cnJlbnRBY3RpdmVJbmRleCA9IC0xOwogICAgICB9CgogICAgICBpZiAoKCFldmVudC5zaGlmdEtleSB8fCAhZXZlbnQubWV0YUtleSAmJiB0aGlzLmlzTWFjKCkpICYmIGV2ZW50LmJ1dHRvbiA9PT0gMCAmJiBldmVudC50YXJnZXQuaWQgPT09ICdjYW52YXMnICYmICFldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb21wLWVsZW1lbnQnKSkgewogICAgICAgIHRoaXMuZVN0YXRlcy5jb3B5QnlLZXlCb29sID0gZmFsc2U7CiAgICAgICAgdGhpcy5pbml0Q29tcFN0YXRlKCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDliJvlu7rlvZPliY3nu4Tku7YKICAgIGNvcHlDdXJyZW50Q29tcDogZnVuY3Rpb24gY29weUN1cnJlbnRDb21wKCkgewogICAgICB2YXIgX2N1cnJDb21wID0gdGhpcy5lZHJhd0NvbXBvbmVudHNbdGhpcy5lU3RhdGVzLmN1cnJlbnRBY3RpdmVJbmRleF07CiAgICAgIGlmICghX2N1cnJDb21wKSByZXR1cm47CiAgICAgIF9jdXJyQ29tcC5pc0FjdGl2ZSA9IGZhbHNlOwoKICAgICAgdmFyIF9jb3B5ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfY3VyckNvbXApKTsKCiAgICAgIHZhciBfc3R5bGUgPSBfY3VyckNvbXAuc3R5bGU7CiAgICAgIHZhciBfdmFsID0gMTA7CiAgICAgIHZhciBfaCA9IF92YWw7CiAgICAgIF9jb3B5LnN0eWxlLnRvcCA9IHBhcnNlSW50KF9zdHlsZS5oZWlnaHQpICsgcGFyc2VJbnQoX3N0eWxlLnRvcCkgKyBwYXJzZUludChfaCk7CiAgICAgIF9jb3B5LnN0eWxlLnRvcCA9IE1hdGgubWF4KDAsIE1hdGgubWluKF9jb3B5LnN0eWxlLnRvcCwgdGhpcy5jb25maWdzLm1heEhpZWdodCkpOwogICAgICBfY29weS5pc0FjdGl2ZSA9IHRydWU7CiAgICAgIHRoaXMuZWRyYXdDb21wb25lbnRzLnB1c2goX2NvcHkpOwogICAgICB0aGlzLmVTdGF0ZXMuY3VycmVudEFjdGl2ZUluZGV4ID0gdGhpcy5lZHJhd0NvbXBvbmVudHMubGVuZ3RoIC0gMTsgLy/mm7TmlrDmv4DmtLvnu4Tku7bnmoTkuIvmoIcKICAgIH0sCiAgICAvLyDlpJrpgInmk43kvZw65Y+N6YCJL+a4heepuuWkmumAiS/lsZ7mgKflupTnlKgKICAgIHNldE11bHRpcGxlU3RhdGU6IGZ1bmN0aW9uIHNldE11bHRpcGxlU3RhdGUoc3RhdGUsIHZhbHVlKSB7CiAgICAgIGlmIChzdGF0ZSA9PT0gJ0lzb21ldHJpYycpIHsKICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5lU3RhdGVzLm11bHRpcGxlQWN0aXZlQXJyLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgICB2YXIgb2JqID0gdGhpcy5lU3RhdGVzLm11bHRpcGxlQWN0aXZlQXJyW2ldOwogICAgICAgICAgdmFyIGJvb2wgPSBvYmpbJ211bHRpcGxlQWN0aXZlQm9vbCddOwoKICAgICAgICAgIGlmICghYm9vbCkgewogICAgICAgICAgICB0aGlzLmVTdGF0ZXMubXVsdGlwbGVBY3RpdmVBcnIuc3BsaWNlKGksIDEpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIGxlbiA9IHRoaXMuZVN0YXRlcy5tdWx0aXBsZUFjdGl2ZUFyci5sZW5ndGg7CiAgICAgICAgdmFyIHZhbCA9IDA7CgogICAgICAgIGlmICh2YWx1ZSA9PT0gJ3JvdycpIHsKICAgICAgICAgIHRoaXMuZVN0YXRlcy5tdWx0aXBsZUFjdGl2ZUFyciA9IHRoaXMuZVN0YXRlcy5tdWx0aXBsZUFjdGl2ZUFyci5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgIHJldHVybiBwYXJzZUludChhLnN0eWxlLmxlZnQpIC0gcGFyc2VJbnQoYi5zdHlsZS5sZWZ0KTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsZW47IF9pKyspIHsKICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLmVTdGF0ZXMubXVsdGlwbGVBY3RpdmVBcnJbX2ldOwoKICAgICAgICAgICAgaWYgKF9pID4gMCkgewogICAgICAgICAgICAgIGl0ZW0uc3R5bGUubGVmdCA9IHZhbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFsID0gcGFyc2VJbnQoaXRlbS5zdHlsZS5sZWZ0KSArIHBhcnNlSW50KGl0ZW0uc3R5bGUud2lkdGgpICsgcGFyc2VJbnQodGhpcy5jb25maWdzLklzb21ldHJpY19yb3cpOwogICAgICAgICAgICB2YWwgPSBNYXRoLm1heCgwLCBNYXRoLm1pbih2YWwsIHRoaXMuY29uZmlncy5tYXhXaWR0aCkpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmVTdGF0ZXMubXVsdGlwbGVBY3RpdmVBcnIgPSB0aGlzLmVTdGF0ZXMubXVsdGlwbGVBY3RpdmVBcnIuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoYS5zdHlsZS50b3ApIC0gcGFyc2VJbnQoYi5zdHlsZS50b3ApOwogICAgICAgICAgfSk7CgogICAgICAgICAgZm9yICh2YXIgX2kyID0gMDsgX2kyIDwgbGVuOyBfaTIrKykgewogICAgICAgICAgICB2YXIgX2l0ZW0gPSB0aGlzLmVTdGF0ZXMubXVsdGlwbGVBY3RpdmVBcnJbX2kyXTsKCiAgICAgICAgICAgIGlmIChfaTIgPiAwKSB7CiAgICAgICAgICAgICAgX2l0ZW0uc3R5bGUudG9wID0gdmFsOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YWwgPSBwYXJzZUludChfaXRlbS5zdHlsZS5oZWlnaHQpICsgcGFyc2VJbnQoX2l0ZW0uc3R5bGUudG9wKSArIHBhcnNlSW50KHRoaXMuY29uZmlncy5Jc29tZXRyaWNfY29sdSk7CiAgICAgICAgICAgIHZhbCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHZhbCwgdGhpcy5jb25maWdzLm1heEhpZWdodCkpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PT0gJ3JlU2VsJykgewogICAgICAgIHZhciBfbGVuID0gdGhpcy5lZHJhd0NvbXBvbmVudHMubGVuZ3RoOwogICAgICAgIHRoaXMuZVN0YXRlcy5tdWx0aXBsZUFjdGl2ZUFyciA9IFtdOwoKICAgICAgICBmb3IgKHZhciBfaTMgPSBfbGVuOyBfaTMtLTsgX2kzID4gMCkgewogICAgICAgICAgdmFyIF9pdGVtMiA9IHRoaXMuZWRyYXdDb21wb25lbnRzW19pM107CgogICAgICAgICAgaWYgKCFfaXRlbTIubXVsdGlwbGVBY3RpdmVCb29sKSB7CiAgICAgICAgICAgIHRoaXMuZVN0YXRlcy5tdWx0aXBsZUFjdGl2ZUFyci5wdXNoKF9pdGVtMik7CiAgICAgICAgICB9CgogICAgICAgICAgX2l0ZW0yLm11bHRpcGxlQWN0aXZlQm9vbCA9ICFfaXRlbTIubXVsdGlwbGVBY3RpdmVCb29sOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PT0gJ2NsZWFyJykgewogICAgICAgIHZhciBfbGVuMiA9IHRoaXMuZWRyYXdDb21wb25lbnRzLmxlbmd0aDsKICAgICAgICB0aGlzLmVTdGF0ZXMubXVsdGlwbGVBY3RpdmVBcnIgPSBbXTsKCiAgICAgICAgZm9yICh2YXIgX2k0ID0gX2xlbjI7IF9pNC0tOyBfaTQgPiAwKSB7CiAgICAgICAgICB0aGlzLmVkcmF3Q29tcG9uZW50c1tfaTRdLm11bHRpcGxlQWN0aXZlQm9vbCA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChbJ2lzQXBwbHlTaGFkb3cnLCAnYm9yZGVyUmFkaXVzJ10uaW5kZXhPZihzdGF0ZSkgPiAtMSkgewogICAgICAgIHZhciBfbGVuMyA9IHRoaXMuZVN0YXRlcy5tdWx0aXBsZUFjdGl2ZUFyci5sZW5ndGg7CgogICAgICAgIGZvciAodmFyIF9pNSA9IF9sZW4zOyBfaTUtLTsgX2k1ID4gMCkgewogICAgICAgICAgdGhpcy5lU3RhdGVzLm11bHRpcGxlQWN0aXZlQXJyW19pNV0uc3R5bGVbc3RhdGVdID0gdmFsdWU7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHN0YXRlID09PSAnYWxpZ24nKSB7CiAgICAgICAgc3dpdGNoICh2YWx1ZSkgewogICAgICAgICAgY2FzZSAndCc6CiAgICAgICAgICAgIHRoaXMubXVsdGlwQXJyYXkoJ3RvcCcpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdsJzoKICAgICAgICAgICAgdGhpcy5tdWx0aXBBcnJheSgnbGVmdCcpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdiJzoKICAgICAgICAgICAgdGhpcy5tdWx0aXBBcnJheSgnYm90dG9tJyk7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ3InOgogICAgICAgICAgICB0aGlzLm11bHRpcEFycmF5KCdyaWdodCcpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvLyDliKDpmaTlpJrpgInlhYPntKAKICAgIGRlbE11bHRpcENvbXA6IGZ1bmN0aW9uIGRlbE11bHRpcENvbXAoY29tcCwgaW5kZXgpIHsKICAgICAgdGhpcy5lU3RhdGVzLm11bHRpcGxlQWN0aXZlQXJyLnNwbGljZShpbmRleCwgMSk7CgogICAgICB2YXIgX2luZGV4ID0gdGhpcy5lZHJhd0NvbXBvbmVudHMuaW5kZXhPZihjb21wKTsKCiAgICAgIGlmIChfaW5kZXggPiAtMSkgewogICAgICAgIHRoaXMuZWRyYXdDb21wb25lbnRzW19pbmRleF0ubXVsdGlwbGVBY3RpdmVCb29sID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBjaGFuZ2VDb25maWc6IGZ1bmN0aW9uIGNoYW5nZUNvbmZpZyhzdGF0ZSwgdmFsdWUpIHsKICAgICAgaWYgKCF0aGlzLmNvbmZpZ3Nbc3RhdGVdKSByZXR1cm47CgogICAgICBpZiAoc3RhdGUgPT09ICdiZycpIHsKICAgICAgICB0aGlzLmNoYW5nZUJnSW1nKCk7CiAgICAgIH0KCiAgICAgIHRoaXMuY29uZmlnc1tzdGF0ZV0gPSB2YWx1ZTsKICAgIH0sCiAgICBtdWx0aXBBcnJheTogZnVuY3Rpb24gbXVsdGlwQXJyYXkocGFyYW0pIHsKICAgICAgdmFyIGxpc3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZVN0YXRlcy5tdWx0aXBsZUFjdGl2ZUFycikpOwogICAgICBsaXN0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gWyd0b3AnLCAnbGVmdCddLmluZGV4T2YocGFyYW0pID4gLTEgPyBwYXJzZUludChhLnN0eWxlW3BhcmFtXSkgLSBwYXJzZUludChiLnN0eWxlW3BhcmFtXSkgOiBwYXJhbSA9PT0gJ2JvdHRvbScgPyBwYXJzZUludChiLnN0eWxlLnRvcCkgKyBwYXJzZUludChiLnN0eWxlLmhlaWdodCkgLSAocGFyc2VJbnQoYS5zdHlsZS50b3ApICsgcGFyc2VJbnQoYS5zdHlsZS5oZWlnaHQpKSA6IHBhcnNlSW50KGIuc3R5bGUubGVmdCkgKyBwYXJzZUludChiLnN0eWxlLndpZHRoKSAtIChwYXJzZUludChhLnN0eWxlLmxlZnQpICsgcGFyc2VJbnQoYS5zdHlsZS53aWR0aCkpOwogICAgICB9KTsKICAgICAgdmFyIGxlbiA9IHRoaXMuZVN0YXRlcy5tdWx0aXBsZUFjdGl2ZUFyci5sZW5ndGg7CiAgICAgIHZhciByZXNPYmogPSBsaXN0WzBdOwoKICAgICAgaWYgKFsndG9wJywgJ2xlZnQnXS5pbmRleE9mKHBhcmFtKSA+IC0xKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgdGhpcy5lU3RhdGVzLm11bHRpcGxlQWN0aXZlQXJyW2ldLnN0eWxlW3BhcmFtXSA9IHJlc09iai5zdHlsZVtwYXJhbV07CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHBhcmFtID09PSAnYm90dG9tJykgewogICAgICAgIHZhciBfYm90dG9tID0gcGFyc2VJbnQocmVzT2JqLnN0eWxlLnRvcCkgKyBwYXJzZUludChyZXNPYmouc3R5bGUuaGVpZ2h0KTsKCiAgICAgICAgZm9yICh2YXIgX2k2ID0gMDsgX2k2IDwgbGVuOyBfaTYrKykgewogICAgICAgICAgY29uc29sZS5sb2coX2JvdHRvbSwgdGhpcy5lU3RhdGVzLm11bHRpcGxlQWN0aXZlQXJyW19pNl0uc3R5bGUuaGVpZ2h0LCBfYm90dG9tIC0gdGhpcy5lU3RhdGVzLm11bHRpcGxlQWN0aXZlQXJyW19pNl0uc3R5bGUuaGVpZ2h0KTsKICAgICAgICAgIHRoaXMuZVN0YXRlcy5tdWx0aXBsZUFjdGl2ZUFycltfaTZdLnN0eWxlLnRvcCA9IF9ib3R0b20gLSB0aGlzLmVTdGF0ZXMubXVsdGlwbGVBY3RpdmVBcnJbX2k2XS5zdHlsZS5oZWlnaHQ7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHBhcmFtID09PSAncmlnaHQnKSB7CiAgICAgICAgdmFyIF9yaWdodCA9IHBhcnNlSW50KHJlc09iai5zdHlsZS5sZWZ0KSArIHBhcnNlSW50KHJlc09iai5zdHlsZS53aWR0aCk7CgogICAgICAgIGZvciAodmFyIF9pNyA9IDA7IF9pNyA8IGxlbjsgX2k3KyspIHsKICAgICAgICAgIHRoaXMuZVN0YXRlcy5tdWx0aXBsZUFjdGl2ZUFycltfaTddLnN0eWxlLmxlZnQgPSBfcmlnaHQgLSB0aGlzLmVTdGF0ZXMubXVsdGlwbGVBY3RpdmVBcnJbX2k3XS5zdHlsZS53aWR0aDsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBpc01hYzogZnVuY3Rpb24gaXNNYWMoKSB7CiAgICAgIHJldHVybiAvbWFjaW50b3NofG1hYyBvcyB4L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTsKICAgIH0sCiAgICBjYWxjQW5nbGVEZWdyZWVzOiBmdW5jdGlvbiBjYWxjQW5nbGVEZWdyZWVzKHgsIHkpIHsKICAgICAgdmFyIHZhbCA9IE1hdGguYXRhbjIoeSwgeCkgKiAxODAgLyBNYXRoLlBJOwogICAgICByZXR1cm4gTWF0aC5jZWlsKHZhbCk7CiAgICB9LAogICAgc2VsQ29sb3I6IGZ1bmN0aW9uIHNlbENvbG9yKGNvbXAsIGNvbG9yKSB7CiAgICAgIGlmICh0aGlzLmVTdGF0ZXMuY3VycmVudEFjdGl2ZUluZGV4ID4gLTEgJiYgdGhpcy5lZHJhd0NvbXBvbmVudHNbdGhpcy5lU3RhdGVzLmN1cnJlbnRBY3RpdmVJbmRleF0pIHsKICAgICAgICB0aGlzLmVkcmF3Q29tcG9uZW50c1t0aGlzLmVTdGF0ZXMuY3VycmVudEFjdGl2ZUluZGV4XS5zdHlsZS5jb2xvciA9IGNvbG9yOwogICAgICB9CiAgICB9LAogICAgc2VsQmFja2dyb3VuZDogZnVuY3Rpb24gc2VsQmFja2dyb3VuZChjb21wLCBiZ0NvbG9yKSB7CiAgICAgIGlmICh0aGlzLmVTdGF0ZXMuY3VycmVudEFjdGl2ZUluZGV4ID4gLTEgJiYgdGhpcy5lZHJhd0NvbXBvbmVudHNbdGhpcy5lU3RhdGVzLmN1cnJlbnRBY3RpdmVJbmRleF0pIHsKICAgICAgICB0aGlzLmVkcmF3Q29tcG9uZW50c1t0aGlzLmVTdGF0ZXMuY3VycmVudEFjdGl2ZUluZGV4XS5zdHlsZS5iYWNrZ3JvdW5kID0gYmdDb2xvcjsKICAgICAgfQogICAgfSwKICAgIHNjcmVlbjogZnVuY3Rpb24gc2NyZWVuKCkgewogICAgICB0aGlzLmNvbmZpZ3MuYmdBbGxCb29sID0gIXRoaXMuY29uZmlncy5iZ0FsbEJvb2w7CgogICAgICBpZiAodGhpcy5jb25maWdzLmJnQWxsQm9vbCkgewogICAgICAgIC8vIHRoaXMuY29uZmlncy53aW5kb3dfdyA9IHdpbmRvdy5zY3JlZW4ud2lkdGggPiAxNTAwID8gd2luZG93LnNjcmVlbi53aWR0aCA6IDE1MDA7CiAgICAgICAgLy8gdGhpcy5jb25maWdzLndpbmRvd19oID0gd2luZG93LnNjcmVlbi5oZWlnaHQgPiA4MDAgPyB3aW5kb3cuc2NyZWVuLmhlaWdodCA6IDgwMDsKICAgICAgICB0aGlzLmNvbmZpZ3Mud2luZG93X3cgPSAyOTg1OwogICAgICAgIHRoaXMuY29uZmlncy53aW5kb3dfaCA9IDE0NDU7CiAgICAgICAgdGhpcy5jb25maWdzLnNjYWxlID0gMTsKICAgICAgfQogICAgfSwKICAgIGluaXRTdG9yYWdlRGF0YTogZnVuY3Rpb24gaW5pdFN0b3JhZ2VEYXRhKGNsZWFyQm9vbCkgewogICAgICBpZiAoIWNsZWFyQm9vbCAmJiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JtX2RhdGFzJykpIHJldHVybjsKICAgICAgdmFyIHBhcmFtcyA9IHsKICAgICAgICBzYXZlX2RhdGFfYXV0bzogW10sCiAgICAgICAgc2F2ZV9kYXRhX2N1c3RvbTogW10KICAgICAgfTsKICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdibV9kYXRhcycsIEpTT04uc3RyaW5naWZ5KHBhcmFtcykpOwogICAgfSwKICAgIHNhdmVEYXRlVG9TdG9yYWdlOiBmdW5jdGlvbiBzYXZlRGF0ZVRvU3RvcmFnZShkYXRhLCBzdGF0ZSkgewogICAgICB2YXIgc2F2ZURhdGEgPSBkYXRhIHx8IHRoaXMuZWRyYXdDb21wb25lbnRzOyAvL+WtmOWCqOS8mOWMlu+8jOayoeacieWGheWuueeahOmhtemdouS4jemcgOimgeWtmOWCqAoKICAgICAgaWYgKCFzYXZlRGF0YSB8fCBBcnJheS5pc0FycmF5KHNhdmVEYXRhKSAmJiBzYXZlRGF0YS5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBvYmogPSB7CiAgICAgICAgZGF0YTogc2F2ZURhdGEsCiAgICAgICAgdHlwZTogc3RhdGUgfHwgJ2F1dG8nLAogICAgICAgIHVwZGF0ZVRpbWU6IG5ldyBEYXRlKCkKICAgICAgfTsKCiAgICAgIGlmICghd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdibV9kYXRhcycpKSB7CiAgICAgICAgdGhpcy5pbml0U3RvcmFnZURhdGEoKTsKICAgICAgfQoKICAgICAgdmFyIHBhcmFtcyA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYm1fZGF0YXMnKTsKCiAgICAgIGlmIChwYXJhbXMgJiYgdHlwZW9mIHBhcmFtcyA9PT0gJ3N0cmluZycpIHsKICAgICAgICBwYXJhbXMgPSBKU09OLnBhcnNlKHBhcmFtcyk7CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy53ZWJDb25maWcpIHsKICAgICAgICB0aGlzLmluaXRDb25maWcoKTsKICAgICAgfQoKICAgICAgaWYgKHN0YXRlID09PSAnY3VzdG9tJykgewogICAgICAgIHBhcmFtcy5zYXZlX2RhdGFfY3VzdG9tLnVuc2hpZnQob2JqKTsKCiAgICAgICAgaWYgKHBhcmFtcy5zYXZlX2RhdGFfY3VzdG9tLmxlbmd0aCA+IHRoaXMud2ViQ29uZmlnLmN1c3RvbSkgewogICAgICAgICAgcGFyYW1zLnNhdmVfZGF0YV9jdXN0b20gPSBwYXJhbXMuc2F2ZV9kYXRhX2N1c3RvbS5zbGljZSgwLCB0aGlzLndlYkNvbmZpZy5jdXN0b20pOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBwYXJhbXMuc2F2ZV9kYXRhX2F1dG8udW5zaGlmdChvYmopOwoKICAgICAgICBpZiAocGFyYW1zLnNhdmVfZGF0YV9hdXRvLmxlbmd0aCA+IHRoaXMud2ViQ29uZmlnLmF1dG8pIHsKICAgICAgICAgIHBhcmFtcy5zYXZlX2RhdGFfYXV0byA9IHBhcmFtcy5zYXZlX2RhdGFfYXV0by5zbGljZSgwLCB0aGlzLndlYkNvbmZpZy5hdXRvKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuX3NhdmVXZWJTdG9yYWdlKHBhcmFtcyk7CgogICAgICB0aGlzLmN1cnJlbnRIaXN0b3J5SW5kZXggPSAtMTsKICAgIH0sCiAgICBnZXRTdG9yYWdlRGF0YTogZnVuY3Rpb24gZ2V0U3RvcmFnZURhdGEocmVsb2FkQm9vbCkgewogICAgICBpZiAoIXJlbG9hZEJvb2wpIHsKICAgICAgICB0aGlzLmFjdGl2ZUhpc3RvcnlCb29sID0gIXRoaXMuYWN0aXZlSGlzdG9yeUJvb2w7CiAgICAgIH0KCiAgICAgIHRoaXMuY3VycmVudEhpc3RvcnlJbmRleCA9IC0xOwogICAgICB2YXIgcGFyYW1zID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdibV9kYXRhcycpOwoKICAgICAgaWYgKHBhcmFtcyAmJiB0eXBlb2YgcGFyYW1zID09PSAnc3RyaW5nJykgewogICAgICAgIHBhcmFtcyA9IEpTT04ucGFyc2UocGFyYW1zKTsKICAgICAgfQoKICAgICAgdmFyIGxpc3QgPSBbXS5jb25jYXQocGFyYW1zLnNhdmVfZGF0YV9jdXN0b20sIHBhcmFtcy5zYXZlX2RhdGFfYXV0byk7CiAgICAgIHRoaXMuaGlzdG9yeUN1cnJuZXREYXRhID0gXy5vcmRlckJ5KGxpc3QsICd1cGRhdGVUaW1lJywgImRlc2MiKTsKICAgIH0sCiAgICBfc2F2ZVdlYlN0b3JhZ2U6IGZ1bmN0aW9uIF9zYXZlV2ViU3RvcmFnZShwYXJhbXMsIGRlbFNhdmVCb29sKSB7CiAgICAgIHZhciBzZWNjTWVzc2FnZSA9IGRlbFNhdmVCb29sID8gIuWIoOmZpOaIkOWKnyIgOiAi5L+d5a2Y5oiQ5YqfIjsKICAgICAgdmFyIGVyck1lc3NhZ2UgPSBkZWxTYXZlQm9vbCA/ICLliKDpmaTlpLHotKUiIDogZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGxvY2FsU3RvcmFnZSkubGVuZ3RoKSA+IDEwMjQgKiAxMDI0ICogNSAtIDEwMCA/ICfmlbDmja7otoXov4fljoblj7LmlbDmja7mnIDlpKflgLzvvIzor7fliKDpmaTljoblj7LkuI3pnIDopoHnmoTmlbDmja7ph43mlrDlrZjlgqgnIDogIuS/neWtmOaVsOaNruWHuumUmSI7CgogICAgICB0cnkgewogICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYm1fZGF0YXMnLCBKU09OLnN0cmluZ2lmeShwYXJhbXMpKTsKICAgICAgICB0aGlzLnNhdmVEYXRhSW5mbygic3VjY2VzcyIsIHNlY2NNZXNzYWdlKTsKICAgICAgfSBjYXRjaCAoX3VudXNlZCkgewogICAgICAgIHRoaXMuc2F2ZURhdGFJbmZvKCdlcnJvcicsIGVyck1lc3NhZ2UpOwogICAgICB9CgogICAgICBpZiAodGhpcy5hY3RpdmVIaXN0b3J5Qm9vbCkgewogICAgICAgIHRoaXMuZ2V0U3RvcmFnZURhdGEodHJ1ZSk7CiAgICAgIH0KICAgIH0sCiAgICBpbml0Q29uZmlnOiBmdW5jdGlvbiBpbml0Q29uZmlnKCkgewogICAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdibV9kYXRhcycpKSByZXR1cm47CiAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgY3VzdG9tOiA1MCwKICAgICAgICBhdXRvOiA1MAogICAgICB9OwogICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NvbmZpZ3MnLCBKU09OLnN0cmluZ2lmeShwYXJhbXMpKTsKICAgIH0sCiAgICBkZWxldGVIaXN0b3J5RGF0YTogZnVuY3Rpb24gZGVsZXRlSGlzdG9yeURhdGEoaW5kZXgpIHsKICAgICAgdmFyIGN1cnJlbnREYXRhID0gdGhpcy5oaXN0b3J5Q3Vycm5ldERhdGFbaW5kZXhdOwoKICAgICAgaWYgKGN1cnJlbnREYXRhKSB7CiAgICAgICAgZGVsZXRlIGN1cnJlbnREYXRhLmlzQWN0aXZlOwogICAgICB9CgogICAgICBpZiAoIXdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYm1fZGF0YXMnKSkgewogICAgICAgIHRoaXMuaW5pdFN0b3JhZ2VEYXRhKCk7CiAgICAgIH0KCiAgICAgIHZhciBwYXJhbXMgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JtX2RhdGFzJyk7CgogICAgICBpZiAocGFyYW1zICYmIHR5cGVvZiBwYXJhbXMgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgcGFyYW1zID0gSlNPTi5wYXJzZShwYXJhbXMpOwogICAgICB9CgogICAgICBpZiAocGFyYW1zKSB7CiAgICAgICAgdmFyIGMgPSBwYXJhbXMuc2F2ZV9kYXRhX2N1c3RvbTsKICAgICAgICB2YXIgbGVuX2MgPSBjLmxlbmd0aDsKICAgICAgICB2YXIgaGFzQm9vbCA9IGZhbHNlOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbl9jOyBpKyspIHsKICAgICAgICAgIHZhciBpdGVtID0gY1tpXTsKCiAgICAgICAgICBpZiAoaXRlbSAmJiBjdXJyZW50RGF0YSAmJiBpdGVtLnVwZGF0ZVRpbWUgPT09IGN1cnJlbnREYXRhLnVwZGF0ZVRpbWUpIHsKICAgICAgICAgICAgcGFyYW1zLnNhdmVfZGF0YV9jdXN0b20uc3BsaWNlKGksIDEpOwogICAgICAgICAgICBoYXNCb29sID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICghaGFzQm9vbCkgewogICAgICAgICAgdmFyIGEgPSBwYXJhbXMuc2F2ZV9kYXRhX2F1dG87CiAgICAgICAgICB2YXIgbGVuX2EgPSBhLmxlbmd0aDsKCiAgICAgICAgICBmb3IgKHZhciBfaTggPSAwOyBfaTggPCBsZW5fYTsgX2k4KyspIHsKICAgICAgICAgICAgdmFyIF9pdGVtMyA9IGFbX2k4XTsKCiAgICAgICAgICAgIGlmIChfaXRlbTMgJiYgY3VycmVudERhdGEgJiYgX2l0ZW0zLnVwZGF0ZVRpbWUgPT09IGN1cnJlbnREYXRhLnVwZGF0ZVRpbWUpIHsKICAgICAgICAgICAgICBwYXJhbXMuc2F2ZV9kYXRhX2F1dG8uc3BsaWNlKF9pOCwgMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHRoaXMuX3NhdmVXZWJTdG9yYWdlKHBhcmFtcywgdHJ1ZSk7CiAgICAgIH0KICAgIH0sCiAgICBjbGVhclN0b3JhZ2VEYXRhOiBmdW5jdGlvbiBjbGVhclN0b3JhZ2VEYXRhKCkgewogICAgICB0aGlzLmluaXRTdG9yYWdlRGF0YSh0cnVlKTsKICAgICAgdGhpcy5nZXRTdG9yYWdlRGF0YSh0cnVlKTsKICAgIH0sCiAgICBjaGFuZ2VCZ0ltZzogZnVuY3Rpb24gY2hhbmdlQmdJbWcodXJsKSB7CiAgICAgIHRoaXMuY29uZmlncy5iYWNrZ3JvdW5kVXJsID0gdXJsOwogICAgfSwKICAgIGluaXRIaXN0b3J5TGlzdFN0YXRlOiBmdW5jdGlvbiBpbml0SGlzdG9yeUxpc3RTdGF0ZShpbmRleCkgewogICAgICB0aGlzLmN1cnJlbnRIaXN0b3J5SW5kZXggPSBpbmRleCA+IC0xID8gaW5kZXggOiAtMTsKCiAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuaGlzdG9yeUN1cnJuZXREYXRhKSkgewogICAgICAgIHZhciBsZW4gPSB0aGlzLmhpc3RvcnlDdXJybmV0RGF0YS5sZW5ndGg7CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgIGlmICh0aGlzLmhpc3RvcnlDdXJybmV0RGF0YSAmJiB0aGlzLmhpc3RvcnlDdXJybmV0RGF0YVtpXSkgewogICAgICAgICAgICB0aGlzLmhpc3RvcnlDdXJybmV0RGF0YVtpXS5pc0FjdGl2ZSA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGFwcGx5SGlzdG9yeTogZnVuY3Rpb24gYXBwbHlIaXN0b3J5KGxpc3QpIHsKICAgICAgdGhpcy5lZHJhd0NvbXBvbmVudHMgPSBsaXN0OwogICAgICB0aGlzLmluaXRDb21wU3RhdGUoKTsKICAgICAgdGhpcy5jbG9zZUhpc3RvcnkoKTsKICAgIH0sCiAgICBjbG9zZUhpc3Rvcnk6IGZ1bmN0aW9uIGNsb3NlSGlzdG9yeSgpIHsKICAgICAgdGhpcy5hY3RpdmVIaXN0b3J5Qm9vbCA9IGZhbHNlOwogICAgfSwKICAgIGNsZXJhckhpc3RvcnlEYXRhOiBmdW5jdGlvbiBjbGVyYXJIaXN0b3J5RGF0YSgpIHsKICAgICAgdGhpcy5pbml0U3RvcmFnZURhdGEodHJ1ZSk7CiAgICB9LAogICAgZWxpbWluYXRlR2hvc3Rpbmc6IGZ1bmN0aW9uIGVsaW1pbmF0ZUdob3N0aW5nKGV2ZW50KSB7CiAgICAgIHZhciBkcmFnSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpOwogICAgICBkcmFnSWNvbi5zcmMgPSAnZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95SDVCQUVBQUFBQUxBQUFBQUFCQUFFQUFBSUJSQUE3JywgZHJhZ0ljb24ud2lkdGggPSAwOwogICAgICBkcmFnSWNvbi5oZWlnaHQgPSAwOwogICAgICBkcmFnSWNvbi5vcGFjaXR5ID0gMDsKCiAgICAgIGlmIChldmVudCAmJiBldmVudC5kYXRhVHJhbnNmZXIpIHsKICAgICAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKGRyYWdJY29uLCAwLCAwKTsKICAgICAgfQogICAgfSwKICAgIHNhdmVEYXRhSW5mbzogZnVuY3Rpb24gc2F2ZURhdGFJbmZvKHN0YXRlLCBtc2dzKSB7CiAgICAgIHZhciB0eXBlID0gc3RhdGUgfHwgJ3N1Y2Nlc3MnOwogICAgICB2YXIgbXNnID0gbXNncyB8fCAn5pWw5o2u5L+d5a2Y5oiQ5Yqf77yBJzsKICAgICAgVnVlLiR0b2FzdC5vcGVuKHsKICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgIG1lc3NhZ2U6IG1zZywKICAgICAgICBwb3NpdGlvbjogJ3RvcC1yaWdodCcKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["editor.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"editor\">\n    <!-- 组件库 -->\n    <editor-comps \n      v-bind:elements=\"edrawComponents\"\n      v-bind:webConfig=\"webConfig\"\n      v-on:initCompsState=\"initComponentState\" \n      v-on:selectComp=\"selectComp\"></editor-comps>\n    \n    <!-- 画布 -->\n    <editor-canvas \n      v-bind:configs=\"configs\"\n      v-bind:edrawComps=\"edrawComponents\"\n      v-bind:currentActiveIndex=\"eStates.currentActiveIndex\"\n      v-bind:multipleActiveBool=\"eStates.multipleActiveBool\"\n      v-on:initCompsState=\"initComponentState\" \n      v-on:dragComp=\"dragCurrentComp\"\n      v-on:resizeByDragComp=\"resizeByDragComp\"\n      v-on:trans=\"transComp\"\n      v-on:changeTextVal=\"changeTextVal\"\n      v-on:screen=\"screen\"></editor-canvas>\n\n    <!-- 组件设置 -->\n    <editor-settings\n      v-bind:currentActiveIndex=\"eStates.currentActiveIndex\"\n      v-bind:currentElement=\"edrawComponents[eStates.currentActiveIndex]\"\n      v-bind:multipleActiveArr=\"eStates.multipleActiveArr\"\n      v-bind:configs=\"configs\"\n      v-on:delComp=\"delComp\"\n      v-on:delMultipComp=\"delMultipComp\"\n      v-on:setMultipleState=\"setMultipleState\"\n      v-on:changeConfig=\"changeConfig\"\n      v-on:download=\"download\"\n      v-on:screen=\"screen\"\n      v-on:saveDateToStorage=\"saveDateToStorage\"\n      v-on:getHistory=\"getStorageData\"\n      v-on:changeBgImg=\"changeBgImg\"\n      v-on:selColor=\"selColor\"\n      v-on:selBackground=\"selBackground\"></editor-settings>\n    \n    <editor-history \n      v-if=\"activeHistoryBool\"\n      v-bind:list=\"historyCurrnetData\"\n      v-bind:currentIndex=\"currentHistoryIndex\"\n      v-on:initState=\"initHistoryListState\"\n      v-on:applyHistory=\"applyHistory\"\n      v-on:closeHistory=\"closeHistory\"\n      v-on:deleteHistoryData=\"deleteHistoryData\"\n      v-on:clerarHistoryData=\"clearStorageData\"\n      ></editor-history>\n    <!-- 帮助 -->\n    <editor-help/>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport EditorComps from './editor-comps';\nimport EditorCanvas from './editor-canvas';\nimport EditorSettings from './editor-settings';\nimport EditorHelp from './editor-help';\nimport EditorHistory from './editor-history';\nimport _ from 'lodash';  \n\nexport default {\n  name: 'Editor',\n  created:function() {\n    this.initStorageData();\n    this.initBindingEvent();\n    this.initData\n  },\n  mounted:function() {\n\n  },\n  \n  data(){\n     return {\n        eStates:{\n          currentActiveIndex:-1,\n          copyByKeyBool:false,\n          multipleActiveArr:[],\n        },\n        edrawComponents:[],\n        configs:{\n          bg:\"grid\",\n          pageName:'底图',\n          spacing:10,\n          scale:1,\n          dragIconSize:2,\n          Isometric_row:10,\n          Isometric_colu:10,\n          dowloadImgType:'png',\n          bgAllBool:false,\n          width: 2945,\n          height: 1445,\n          maxWidth:3445,\n          maxHieght:1505,\n          backgroundUrl:\"\",\n        },\n        webConfig: {\n          custom: 25,\n          auto:5,\n        },\n        historyCurrnetData:[],\n        currentHistoryIndex:-1,\n        activeHistoryBool:false\n     }\n  },\n  components: {\n    'editor-comps':EditorComps,\n    'editor-canvas':EditorCanvas,\n    'editor-settings':EditorSettings,\n    'editor-help':EditorHelp,\n    'editor-history':EditorHistory\n  },\n  methods: {\n    initData() {\n      this.activeHistoryBool = false;\n    },\n    initBindingEvent() {\n      document.addEventListener('keydown', this.kaydownFun, false);\n      document.addEventListener('mousedown', this.mousedownFun);\n      window.addEventListener('beforeunload', this.leaving);\n    },\n    leaving(event) {\n      // this.saveDateToStorage();\n      // console.log(event.returnValue)\n      let message = \"内容更改，注意截图缓存\"; \n      event.returnValue = message;\n      return message;\n    },\n    download:function() {\n      //TODO:页面下载\n    },\n    saveAs:function(img) {\n      let _dom = window.document.createElement('a');\n        _dom.href = img\n        _dom.dataset.downloadurl = ['image/png', 'IMG_DOWNLOAD_NAME', _dom.href].join(':');\n        document.body.appendChild(_dom);\n        _dom.click();\n        document.body.removeChild(_dom);\n    },\n    // 组件选择\n    selectComp(event, comp) {\n      let item = JSON.parse(JSON.stringify(comp));\n      if(!item) return;\n      this.initCompState();\n      item.isActive = true;\n      item.multipleActiveBool=false;\n      let rect = document.getElementById('canvas').getClientRects()[0];\n      let {\n        width, \n        height, \n        borderRadius, \n        rotate, \n        borderWidth, \n        background, \n        isApplyShadow, \n        bgiBool, \n        color,\n        border,\n        opacity } = item.defStyle;\n      let {clientX , clientY} = event;\n      let _style = {\n          width:width || 100,\n          height:height || 100,\n          top: clientY  - rect.top + 60 || 100,\n          left:clientX + 213 - rect.left || 100,\n          rotate: rotate || 0,\n          drag_start_x: 0, //拖拽相对\n          drag_start_y :0,\n          borderWidth:borderWidth || 0,\n          background:background,\n          isApplyShadow:isApplyShadow  === undefined || isApplyShadow === null ? 'true' : 'false',\n          position:'absolute',\n          isFixed:\"false\",\n          bgiBool:bgiBool || false, //材质\n          borderRadius:borderRadius || 0,\n          border:border ,\n          fontSize: 14,\n          opacity:opacity,\n          color: color\n      }\n      _style.left =Math.max(0,  Math.min(_style.left, this.configs.maxWidth));\n      _style.top =Math.max(0,  Math.min(_style.top, this.configs.maxHieght));\n      item.style = _style;\n      this.edrawComponents.push(item);\n      this.eStates.currentActiveIndex = this.edrawComponents.length -1;\n    },\n    initComponentState(current, event) {\n      if(current === undefined || current === null || current === -1) return;\n      if(event && (event.shiftKey || event.metaKey && this.isMac()) && event.button === 0 ) {\n        this.edrawComponents[current].isActive = false;\n        if(this.eStates.currentActiveIndex > -1) {\n          this.eStates.currentActiveIndex = -1;\n        }\n\n        // 多选操作缓存数组\n        const _multipActiveIndex = this.eStates.multipleActiveArr.indexOf(this.edrawComponents[current]);\n        if( _multipActiveIndex === -1) {\n          this.eStates.multipleActiveArr.push(this.edrawComponents[current])\n        }\n\n        if(this.edrawComponents[current].multipleActiveBool) {\n          this.edrawComponents[current].multipleActiveBool = false;\n          this.eStates.multipleActiveArr.splice(_multipActiveIndex, 1);\n        } else {\n          this.edrawComponents[current].multipleActiveBool = true;\n        }\n      }else {\n        this.initCompState();     \n        this.eStates.currentActiveIndex = current;\n        this.edrawComponents[current].isActive = true;\n      }\n    },\n    // 初始化画布内组件状态\n    initCompState() {\n      let len = this.edrawComponents.length;\n      this.eStates.multipleActiveArr = [];\n      for(let i=0;i<len;i++) {\n        this.edrawComponents[i].isActive = false;\n        this.edrawComponents[i].multipleActiveBool = false;\n      }\n      this.eStates.copyByKeyBool = false;\n    },\n    // 组件拖拽：shiftKey === true 处理多选\n    dragCurrentComp(event, comp, state, currentIndex, canvesRect) {\n      if(event && (event.shiftKey || event.metaKey && this.isMac())  ){\n        console.log('多选处理')\n      } else {\n        this.eStates.copyByKeyBool = false;\n        let _rect = document.getElementById('canvas').getClientRects()[0]\n        let _l =_rect.left;\n        let _t =_rect.left;\n        if(state === 'start') {\n          this.eStates.currentActiveIndex = currentIndex;\n          console.log( event.clientX , comp.style.left , _l , canvesRect.x, this.configs.scale)\n          comp.style.drag_start_x = event.clientX - comp.style.left - _l + canvesRect.x;\n          comp.style.drag_start_y = event.clientY - comp.style.top - _t + canvesRect.y;\n        }else if(state === 'drag'){\n          let _left = event.clientX  - comp.style.drag_start_x  - _l + canvesRect.x; \n          let _top = event.clientY - comp.style.drag_start_y - _t + canvesRect.y ;\n          if(_left <0 || _top < 0) return;\n          _left =Math.max(0,  Math.min(_left, this.configs.maxWidth));\n          _top = Math.max(0, Math.min(_top, this.configs.maxHieght));\n          comp.style.left = _left;\n          comp.style.top = _top ;\n        }\n        if(['start', 'drag'].indexOf(state) > -1) {\n          this.eliminateGhosting(event); // 消除拖拽鬼影\n        } \n        \n      }\n    },\n    resizeByDragComp(event, comp, state, arrow,currentIndex) {\n      if(event && (event.shiftKey || event.metaKey && this.isMac())  ){\n        console.log('多选处理')\n      } else {\n        this.eStates.copyByKeyBool = false;\n        let _l = document.getElementById('canvas').getClientRects()[0].left;\n        let _t = document.getElementById('canvas').getClientRects()[0].top;\n        if(state === 'start') {\n          this.eStates.currentActiveIndex = currentIndex;\n          comp.style.drag_start_x = arrow === 'r' ? comp.style.left:\n                                    arrow === 'l' ?comp.style.left + comp.style.width + _l - 213 :\n                                    10;\n          comp.style.drag_start_y = arrow === 'b' ? comp.style.top  :\n                                    arrow === 't' ?comp.style.top + comp.style.height  :\n                                    10;\n        }else if(state === 'drag'){\n          let _width = 0;\n          let _top = 0;\n          let _height = 0;\n     \n          switch(arrow) {\n            case 'r':\n              _width = parseInt((event.clientX- _l) /this.configs.scale) - comp.style.drag_start_x  + 213; \n              _width = Math.min(_width, this.configs.width) ;\n              comp.style.width = _width >= 10 ? _width: 10;\n              break;\n            case 'l':\n              comp.style.left = (event.clientX - _l)/this.configs.scale + 213 ; \n              _width = comp.style.drag_start_x - event.clientX /this.configs.scale ;\n              _width =Math.max(0,  Math.min(_width, this.configs.maxWidth));\n              comp.style.width = _width >= 10 ? _width: 10;\n              break;\n            case 't':\n              comp.style.top = (event.clientY -_t )/ this.configs.scale + 60;\n              _height = comp.style.drag_start_y - event.clientY /this.configs.scale;\n              _height =Math.max(10,  Math.min(_height, this.configs.maxWidth));\n              comp.style.height = _height >= 10 ? _height : 10;\n              break;\n            case 'b':\n              _top = _t >=0 ? ((event.clientY - _t) / this.configs.scale- comp.style.drag_start_y + 60) :event.clientY - comp.style.drag_start_y - _t  + 60;\n              _top = Math.max(10, Math.min(_top, this.configs.maxWidth));\n              comp.style.height = _top >= 10 ? _top: 10;\n              break;\n            default:\n              break\n          }\n        }\n      }\n    },\n    transComp(event, comp){\n        let _x = event.clientX - comp.style.left - comp.style.width / 2;\n        let _y = event.clientY - comp.style.top - comp.style.height / 2;\n        comp.style.rotate = this.calcAngleDegrees(_x, _y);\n    },\n    changeTextVal(event, item) {\n      let val = event.target.innerText;\n      if(event && item) {\n        item.value = val;\n        event.target.innerText = item.value;\n      }\n    },\n    // 组件删除\n    delComp(index, state) {\n      if(state === 'multipleDel') {\n        let len = this.edrawComponents.length;\n        this.eStates.multipleActiveArr = [];\n        for(let i=len;i--;i >0) {\n          let multipBool = this.edrawComponents[i].multipleActiveBool;\n          if(multipBool) {\n            this.edrawComponents.splice(i,1)\n          }\n        }\n      } else {\n        if(this.eStates.currentActiveIndex > -1 &&this.edrawComponents.length > 0) {\n          this.edrawComponents.splice(this.eStates.currentActiveIndex,1)\n          this.eStates.currentActiveIndex = -1;\n        }\n      }\n    },\n    // 键盘事件\n    kaydownFun(event) {\n      if(event.key === 'v' && document.activeElement.nodeName === 'INPUT') {\n        return;\n      }else if(event.key === 'c' &&  document.activeElement.nodeName === 'INPUT') {\n        document.activeElement.blur();\n      }\n      if(event.target.nodeName === 'INPUT' && this.eStates.copyByKeyBool) {\n         this.eStates.copyByKeyBool = false;\n      }\n      if(event.key === 'c') {\n        this.eStates.copyByKeyBool = true;\n      }else if(this.eStates.copyByKeyBool && event.key === 'v') {\n        this.copyCurrentComp();\n      }else if(event.target.nodeName !== 'INPUT'){\n        if(['ArrowUp','ArrowDown','ArrowLeft',\"ArrowRight\"].indexOf(event['code'])> -1) {\n          event.preventDefault();\n          if(this.eStates.currentActiveIndex > -1 && this.eStates.multipleActiveArr.length === 0) {\n            this.arrowItem(event['code'], this.edrawComponents[this.eStates.currentActiveIndex])\n          }else if(this.eStates.multipleActiveArr.length > 0){\n            let len = this.eStates.multipleActiveArr.length;\n            for(let i=0;i<len;i++){\n               this.arrowItem(event['code'], this.eStates.multipleActiveArr[i])\n            }\n          }\n        }\n      }\n      if(event.key === 'Delete' || this.isMac() && event.key === 'Backspace')  {\n        if(!(event.target.innerHTML && event.target.contentEditable) || event.target.contentEditable === 'inherit') {\n          this.delComp();\n        }\n      }\n    },\n    arrowItem(arrow, obj) {\n      if(arrow && obj) {\n        switch (arrow) {\n          case 'ArrowUp' :\n            obj.style.top = (obj.style.top - 1) > 0 ? ( obj.style.top - 1) : 0;\n            break;\n          case 'ArrowDown' :\n            obj.style.top = obj.style.top + 1;\n            break;\n          case 'ArrowLeft' :\n            obj.style.left = (obj.style.left -1 )> 0? (obj.style.left -1) : 0;\n            break;\n          case 'ArrowRight':\n            obj.style.left =  obj.style.left +1;\n            break;\n          default:\n            break;\n        }\n      }\n    },\n    // 多选事件\n    mousedownFun(event) {\n      this.eliminateGhosting(event); // 消除拖拽鬼影\n      if(event && event.shiftKey && this.eStates.currentActiveIndex > -1) {\n        this.edrawComponents[this.eStates.currentActiveIndex].isActive = false;\n        this.eStates.currentActiveIndex = -1;\n      }\n      if((!event.shiftKey || !event.metaKey && this.isMac()) && event.button === 0 \n        && event.target.id==='canvas' \n        && !event.target.classList.contains('comp-element')) {\n        this.eStates.copyByKeyBool = false;\n        this.initCompState();\n      } \n    },\n    // 创建当前组件\n    copyCurrentComp:function() {\n      let _currComp = this.edrawComponents[this.eStates.currentActiveIndex];\n      if(!_currComp) return;\n      _currComp.isActive = false;\n      let _copy = JSON.parse(JSON.stringify(_currComp));\n      let _style = _currComp.style;\n      let _val = 10;\n      let _h = _val;\n      _copy.style.top = parseInt(_style.height) + parseInt(_style.top) + parseInt(_h);\n      _copy.style.top = Math.max(0, Math.min(_copy.style.top, this.configs.maxHieght));\n      _copy.isActive = true;\n      this.edrawComponents.push(_copy);\n      this.eStates.currentActiveIndex = this.edrawComponents.length - 1; //更新激活组件的下标\n    },\n    // 多选操作:反选/清空多选/属性应用\n    setMultipleState:function(state, value) {\n      if(state === 'Isometric') {\n        for(let i = this.eStates.multipleActiveArr.length-1;i>=0;i--) {\n          let obj = this.eStates.multipleActiveArr[i];\n          let bool = obj['multipleActiveBool'];\n          if(!bool) {\n            this.eStates.multipleActiveArr.splice(i,1);\n          }\n        }\n        let len = this.eStates.multipleActiveArr.length;\n        let val = 0;\n        if(value === 'row') {\n          this.eStates.multipleActiveArr =  this.eStates.multipleActiveArr.sort(function(a,b){\n            return parseInt(a.style.left) - parseInt(b.style.left);\n          })\n          for(let i=0;i< len;i++) {\n            let item = this.eStates.multipleActiveArr[i];\n            if(i>0) {\n              item.style.left = val;\n            }\n            val = parseInt(item.style.left) + parseInt(item.style.width) + parseInt(this.configs.Isometric_row);\n            val = Math.max(0, Math.min(val, this.configs.maxWidth));\n          }\n        } else {\n          this.eStates.multipleActiveArr =  this.eStates.multipleActiveArr.sort(function(a,b){\n            return parseInt(a.style.top) - parseInt(b.style.top) ;\n          })\n          for(let i=0;i< len;i++) {\n            let item = this.eStates.multipleActiveArr[i];\n            if(i>0) {\n              item.style.top = val;\n            }\n            val = parseInt(item.style.height) + parseInt(item.style.top) + parseInt(this.configs.Isometric_colu);\n            val = Math.max(0,  Math.min(val, this.configs.maxHieght));\n          }\n        }     \n      }else if(state === 'reSel') {\n        let len = this.edrawComponents.length;\n        this.eStates.multipleActiveArr = [];\n        for(let i=len;i--;i >0) {\n          let item = this.edrawComponents[i];\n          if(!item.multipleActiveBool) {  \n            this.eStates.multipleActiveArr.push(item);\n          }\n          item.multipleActiveBool = !item.multipleActiveBool;\n        }\n      } else if(state === 'clear'){\n        let len = this.edrawComponents.length;\n        this.eStates.multipleActiveArr = [];\n        for(let i=len;i--;i >0) {\n          this.edrawComponents[i].multipleActiveBool = false;\n        }\n      }else if(['isApplyShadow', 'borderRadius'].indexOf(state) > -1) {\n        let len = this.eStates.multipleActiveArr.length;\n        for(let i=len;i--;i >0) {\n          this.eStates.multipleActiveArr[i].style[state] = value;\n        }\n      }else if(state === 'align') {\n        switch(value) {\n          case 't' :\n            this.multipArray('top');\n            break;\n          case 'l' :\n            this.multipArray('left');\n            break;\n          case 'b' :\n            this.multipArray('bottom');\n            break;\n          case 'r' :\n            this.multipArray('right');\n            break;\n          default:\n            break;\n        }\n      }\n    },\n    // 删除多选元素\n    delMultipComp(comp, index) {\n      this.eStates.multipleActiveArr.splice(index, 1);\n      let _index = this.edrawComponents.indexOf(comp);\n      if(_index > -1) {\n        this.edrawComponents[_index].multipleActiveBool = false;\n      }\n    },\n    changeConfig(state, value){\n      if(!this.configs[state]) return;\n      if(state === 'bg') {\n        this.changeBgImg()\n      }\n      this.configs[state] = value;\n    },\n    multipArray(param) {\n      let list = JSON.parse(JSON.stringify(this.eStates.multipleActiveArr));\n      list.sort(function(a, b) {\n        return ['top', 'left'].indexOf(param) > -1 ? parseInt(a.style[param]) - parseInt(b.style[param]):\n          param === 'bottom' ? parseInt(b.style.top) + parseInt(b.style.height) - (parseInt(a.style.top) + parseInt(a.style.height)) :\n          parseInt(b.style.left) + parseInt(b.style.width) - (parseInt(a.style.left) + parseInt(a.style.width)) \n      });\n      let len = this.eStates.multipleActiveArr.length;\n      let resObj = list[0];\n      if(['top', 'left'].indexOf(param) > -1) {\n        for(let i=0;i<len;i++) {\n          this.eStates.multipleActiveArr[i].style[param] = resObj.style[param];\n        }\n      }else if(param === 'bottom') {\n        let _bottom = parseInt( resObj.style.top )+ parseInt(resObj.style.height);\n        for(let i=0;i<len;i++) {\n          console.log(_bottom, this.eStates.multipleActiveArr[i].style.height, _bottom- this.eStates.multipleActiveArr[i].style.height)\n          this.eStates.multipleActiveArr[i].style.top = _bottom - this.eStates.multipleActiveArr[i].style.height;\n        }\n      }else if(param === 'right') {\n        let _right = parseInt(resObj.style.left) + parseInt(resObj.style.width);\n        for(let i=0;i<len;i++) {\n          this.eStates.multipleActiveArr[i].style.left = _right - this.eStates.multipleActiveArr[i].style.width;\n        }\n      }\n    },\n    isMac:function() {\n      return /macintosh|mac os x/i.test(navigator.userAgent)\n    },\n    calcAngleDegrees(x, y) {\n      let val =  Math.atan2(y, x) * 180 / Math.PI;\n      return Math.ceil(val);\n    },\n    selColor(comp, color) {\n      if(this.eStates.currentActiveIndex > -1 && this.edrawComponents[this.eStates.currentActiveIndex]) {\n        this.edrawComponents[this.eStates.currentActiveIndex].style.color = color;\n      }\n    },\n    selBackground(comp, bgColor) {\n      if(this.eStates.currentActiveIndex > -1 && this.edrawComponents[this.eStates.currentActiveIndex]) {\n        this.edrawComponents[this.eStates.currentActiveIndex].style.background = bgColor;\n      }\n    },\n    screen:function() {\n      this.configs.bgAllBool = !this.configs.bgAllBool;\n      if(this.configs.bgAllBool) {\n        // this.configs.window_w = window.screen.width > 1500 ? window.screen.width : 1500;\n        // this.configs.window_h = window.screen.height > 800 ? window.screen.height : 800;\n        this.configs.window_w = 2985;\n        this.configs.window_h = 1445\n        this.configs.scale = 1;\n      }\n    },\n    initStorageData(clearBool) {\n      if(!clearBool && window.localStorage.getItem('bm_datas')) return;\n      let params = {\n          save_data_auto:[],\n          save_data_custom:[]\n      }\n      window.localStorage.setItem('bm_datas', JSON.stringify(params));\n    },\n    saveDateToStorage(data, state) {\n      let saveData = data || this.edrawComponents;\n      //存储优化，没有内容的页面不需要存储\n      if(!saveData || Array.isArray(saveData) && saveData.length === 0) {\n        return;\n      }\n      let obj = {\n        data: saveData,\n        type: state || 'auto',\n        updateTime:new Date()\n      };\n      if(!window.localStorage.getItem('bm_datas')) {\n        this.initStorageData();\n      }\n      let params = window.localStorage.getItem('bm_datas');\n      if(params && typeof params === 'string') {\n        params = JSON.parse(params)\n      }\n      if(!this.webConfig) {\n        this.initConfig();\n      }\n      if(state === 'custom') {\n        params.save_data_custom.unshift(obj);\n        if(params.save_data_custom.length >  this.webConfig.custom) {\n          params.save_data_custom = params.save_data_custom.slice(0, this.webConfig.custom);\n        }\n      } else {\n        params.save_data_auto.unshift(obj);\n        if(params.save_data_auto.length >  this.webConfig.auto) {\n          params.save_data_auto = params.save_data_auto.slice(0,  this.webConfig.auto);\n        }\n      }\n      this._saveWebStorage(params);\n      this.currentHistoryIndex = -1;\n    },\n    getStorageData(reloadBool) {\n      if(!reloadBool) {\n        this.activeHistoryBool = !this.activeHistoryBool;\n      }\n      this.currentHistoryIndex = -1;\n      let params = window.localStorage.getItem('bm_datas');\n      if(params && typeof params === 'string') {\n        params = JSON.parse(params)\n      }\n      let list = [].concat(params.save_data_custom, params.save_data_auto);\n      this.historyCurrnetData = _.orderBy(list, 'updateTime', \"desc\");\n    },\n    _saveWebStorage(params, delSaveBool) {\n      let seccMessage = delSaveBool ? \"删除成功\": \"保存成功\";\n      let errMessage  = delSaveBool ? \"删除失败\": \n                        encodeURIComponent(JSON.stringify(localStorage).length) > (1024 * 1024 * 5 - 100) ? '数据超过历史数据最大值，请删除历史不需要的数据重新存储' :\"保存数据出错\";\n      try {\n        window.localStorage.setItem('bm_datas', JSON.stringify(params));\n        this.saveDataInfo(\"success\",seccMessage);\n      }catch {\n        this.saveDataInfo('error',errMessage)\n      }\n      if(this.activeHistoryBool) {\n        this.getStorageData(true);\n      }\n    },\n    initConfig() {\n      if(window.localStorage.getItem('bm_datas')) return;\n      let params = {\n        custom:50,\n        auto:50,\n      }\n      window.localStorage.setItem('configs', JSON.stringify(params));\n    },\n    deleteHistoryData(index) {\n      let currentData = this.historyCurrnetData[index];\n      if(currentData) {\n        delete currentData.isActive;\n      }\n      if(!window.localStorage.getItem('bm_datas')) {\n        this.initStorageData();\n      }\n      let params = window.localStorage.getItem('bm_datas');\n      if(params && typeof params === 'string') {\n        params = JSON.parse(params);\n      }\n      if(params) {\n        let c = params.save_data_custom\n        let len_c =  c.length;\n        let hasBool = false;\n        for(let i=0;i<len_c;i++) {\n          let item = c[i];\n          if(item && currentData && item.updateTime === currentData.updateTime) {\n            params.save_data_custom.splice(i, 1);\n            hasBool = true;\n          }\n        }\n        if(!hasBool) {\n          let a = params.save_data_auto;\n          let len_a = a.length;\n          for(let i=0;i<len_a;i++) {\n            let item = a[i];\n            if(item && currentData && item.updateTime === currentData.updateTime) {\n              params.save_data_auto.splice(i, 1);\n            }\n          }\n        }\n        this._saveWebStorage(params, true)\n      }\n    },\n    clearStorageData() {\n      this.initStorageData(true);\n      this.getStorageData(true);\n    },\n    changeBgImg(url) {\n      this.configs.backgroundUrl = url;\n    },\n    initHistoryListState(index) {\n      this.currentHistoryIndex = index > -1 ? index : -1;\n      if(Array.isArray(this.historyCurrnetData)) {\n        let len = this.historyCurrnetData.length;\n        for(let i=0;i<len;i++) {\n            if(this.historyCurrnetData && this.historyCurrnetData[i]) {\n             this.historyCurrnetData[i].isActive = false;\n           }\n        }\n      }\n    },\n    applyHistory(list) {\n      this.edrawComponents = list;\n      this.initCompState();\n      this.closeHistory();\n    },\n    closeHistory() {\n      this.activeHistoryBool = false;\n    },\n    clerarHistoryData(){\n      this.initStorageData(true);\n    },\n    eliminateGhosting(event) {\n      let dragIcon = document.createElement('img');\n      dragIcon.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\n      dragIcon.width = 0;\n      dragIcon.height = 0;\n      dragIcon.opacity = 0;\n      if(event && event.dataTransfer) {\n        event.dataTransfer.setDragImage(dragIcon,0, 0);\n      }\n\n    },\n    saveDataInfo:function(state, msgs) {\n      let type = state || 'success';\n      let msg = msgs || '数据保存成功！';\n      Vue.$toast.open({\n        type:type,\n        message:msg,\n        position:'top-right'\n      });\n    },\n  }\n}\n</script>\n\n<style>\n\n#editor {\n  margin-top: 60px;\n  padding: 0;\n  position: relative;\n  color: #2c3e50;\n  display: grid;\n  grid-template-columns: 205px auto 205px;\n}\n</style>\n"],"sourceRoot":"src/components"}]}